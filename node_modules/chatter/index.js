var all_sockets = null;

exports.set_sockets = function(sockets) {
    all_sockets = sockets;
};

exports.connect_chatter = function(chatter) {
    all_sockets.emit("entrance", { message: chatter.name + " is online." });
    chatter.socket.on("chat", function(data) {
        all_sockets.emit("chat", { message: chatter.name + " says: " + data.message} );
    });
    chatter.socket.on("disconnect", function() {
        all_sockets.emit("exit", { message: chatter.name + " has disconnected!"} );
        delete all_sockets[chatter.socket];
    });
};